hosted-ce-tools
===============
Tools for maintaining an OSG Hosted CE

This repo contains scripts that are useful for managing an OSG Hosted CE.

cvmfsexec-osg-wrapper
---------------------

Uses CVMFSEXEC to mount some CVMFS repos and runs the executable given on the
command line.  Meant to be run on the exec node as a job wrapper around
the pilot itself; copy it to a location accessible from the pilot job and set
it as `blah_job_wrapper` in `etc/blah.config`, such as

    blah_job_wrapper="$HOME/cvmfsexec-osg-wrapper -safe"

`-safe` runs the wrapped job even if mounting CVMFS failed.  The reason for
the failure will be stored in the environment variable `CVMFSEXEC_WRAPPER_FAILURE`.

As of 2021-10-25, downloads CVMFSEXEC on the fly but we plan to change that
to use a tarball generated by `make-cvmfs-tarball` (see below) instead.

make-cvmfsexec-tarball
----------------------

Downloads CVMFSEXEC from Git, runs `makedist osg`, and tars up the result.
Not used yet (as of 2021-10-25); the plan is to run it on the hosted CE, copy
the result to the remote site, and use it in `cvmfsexec-osg-wrapper` (see
above).

